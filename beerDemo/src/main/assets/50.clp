;;;***************************
;;;***************************
;;;* DEFFACTS KNOWLEDGE BASE *
;;;***************************

(deffacts MAIN::knowledge-base
    (welcome (message WelcomeMessage))
    (goal (variable beer.type))
    (legalanswers (values yes no))
    (displayanswers (values "Yes" "No"))

    ;;rules
    (rule (if advanced is yes)
          (then expertise is advanced))
    (rule (if advanced is no)
          (then expertise is novice))
    (rule (if expertise is advanced and high.alcohol is yes)
          (then beer.type is quadrupel.trappist))
    (rule (if expertise is novice and fruity is yes)
          (then category is ale))
    (rule (if expertise is novice and fruity is no)
          (then category is lager))
    (rule (if category is lager and high.alcohol is yes)
          (then beer.type is bock))
    (rule (if category is lager and high.alcohol is no)
          (then subcategory is pale.lager))
    (rule (if subcategory is pale.lager and hops is yes)
          (then beer.type is india.pale.lager))
    (rule (if subcategory is pale.lager and hops is no)
          (then beer.type is pale.lager))
    (rule (if category is ale and high.alcohol is yes)
          (then subcategory is english.trappist))
    (rule (if category is ale and high.alcohol is no)
          (then subcategory is pale.dark.wheat))
    (rule (if subcategory is pale.dark.wheat and caramel is yes)
          (then subsubcategory is dark.ale))
    (rule (if subcategory is pale.dark.wheat and caramel is no)
          (then subsubcategory is pale.wheat))
    (rule (if subsubcategory is dark.ale and dry is yes)
          (then beer.type is stout))
    (rule (if subsubcategory is dark.ale and dry is no)
          (then beer.type is porter))
    (rule (if subsubcategory is pale.wheat and dry is yes)
          (then beer.type is pale.ale))
    (rule (if subsubcategory is pale.wheat and dry is no)
          (then beer.type is wheat.ale))
    (rule (if subcategory is english.trappist and bitter is yes)
          (then subsubcategory is english.tripple))
    (rule (if subcategory is english.trappist and bitter is no)
          (then subsubcategory is dubbel.blonde))
    (rule (if subsubcategory is dubbel.blonde and caramel is yes)
          (then beer.type is dubbel.trappist))
    (rule (if subsubcategory is dubbel.blonde and caramel is no)
          (then beer.type is blonde.trappist))
    (rule (if subsubcategory is english.tripple and dry is yes)
          (then beer.type is triple.trappist))
    (rule (if subsubcategory is english.tripple and dry is no)
          (then subsubsubcategory is ipa))
    (rule (if subsubsubcategory is ipa and citrus is yes)
          (then beer.type is us.ipa))
    (rule (if subsubsubcategory is ipa and herbal is yes)
          (then beer.type is english.ipa))
    (rule (if expertise is advanced and high.alcohol is no and cherry is yes)
          (then beer.type is kriek))
    (rule (if expertise is advanced and high.alcohol is no and cherry is no)
          (then flavour is notcherry))
    (rule (if expertise is advanced and flavour is notcherry and dry is yes)
          (then beer.type is faro))
    (rule (if expertise is advanced and flavour is notcherry and dry is no)
          (then beer.type is gueuze))
    (rule (if citrus is yes)
          (then herbal is no))
    (rule (if citrus is no)
          (then herbal is yes))

    ;;variables
    (question (variable advanced)
              (query advanced.query))
    (question (variable fruity)
              (query fruity.query))
    (question (variable high.alcohol)
              (query high.alcohol.query))
    (question (variable hops)
              (query hops.query))
    (question (variable bitter)
              (query bitter.query))
    (question (variable caramel)
              (query caramel.query))
    (question (variable cherry)
              (query cherry.query))
    (question (variable dry)
              (query dry.query))
    (question (variable citrus)
              (query citrus.query))

    (answer (variable beer.type)))